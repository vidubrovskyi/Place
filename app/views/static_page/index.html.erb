<% provide(:title, "Home") %>

<section class="py-6 sm:py-6 dark:text-gray-800">
  <div class="container p-6 mx-auto space-y-8">
    <div class="space-y-2 text-center">
      <h2 class="text-3xl font-bold">Заклади</h2>
      <p class="font-serif text-sm dark:text-gray-400">Заклади міста Черкаси</p>
    </div>
    <div class="grid grid-cols-1 gap-x-4 gap-y-8 md:grid-cols-2 lg:grid-cols-4">
      <% c = 0 %>
      <% @shops.each do |shop| %>
        <% break if c == 4 %>
        <%= link_to (shop) do %>
          <article class="flex flex-col dark:bg-gray-100">
            <% if shop.avatar.attached? %>
              <%= image_tag shop.avatar, class: "object-cover w-full h-52 dark:bg-gray-100" %></p>
            <% end %>
            <div class="flex flex-col flex-1 p-2">
              <div class="flex flex-wrap justify-between pt-3 space-x-2 text-xs dark:text-gray-400">
                <div>
                  <p class="text-xs tracking-wider uppercase dark:text-violet-400"><%= shop.name %></p>
                </div>
                <div>
                  <span class="text-green-500">Likes: <%= shop.cached_votes_up %></span>
                  <span class="text-red-500">Dislikes: <%= shop.cached_votes_down %></span>
                </div>
              </div>
              <div class="flex flex-wrap justify-between pt-3 space-x-2 text-xs dark:text-gray-400">
                <p><%= shop.pts.map(&:pt).sort.join(", ") %></p>
                <p><%= shop.working %></p>
              </div>
              <div class="flex flex-wrap justify-between pt-3 space-x-2 text-xs dark:text-gray-400">
                <span><%= shop.address %></span>
                <span><%= shop.contact %></span>
              </div>
            </div>
            <% c += 1 %>
          </article>
        <% end %>
      <% end %>
    </div>
  </div>
  <div class="space-y-2 text-center">
    <%= link_to "Більше", shops_path, class: "px-4 py-1 font-semibold border rounded dark:border-gray-900 dark:text-gray-900 cursor-pointer hover:bg-violet-400" %>
  </div>
</section>

<section class="py-6 sm:py-6 dark:text-gray-800">
  <div class="container p-6 mx-auto space-y-8">
    <div class="space-y-2 text-center">
      <h2 class="text-3xl font-bold">Акції</h2>
      <p class="font-serif text-sm dark:text-gray-400">Акції закладів</p>
    </div>
    <div class="grid grid-cols-1 gap-x-4 gap-y-8 md:grid-cols-2 lg:grid-cols-4">
      <% c = 0 %>
      <% @stocks.each do |stock| %>
        <% break if c == 4 %>
        <%= link_to (stock) do %>
          <article class="flex flex-col dark:bg-gray-100">
            <% if stocks.avatar.attached? %>
              <%= image_tag stock.avatar, class: "object-cover w-full h-52 dark:bg-gray-100" %></p>
            <% end %>
            <div class="flex flex-col flex-1 p-2">
              <h3 class="flex-1 py-2 text-lg font-semibold leading-snug"><%= stock.title %></h3>
            </div>
            <% c += 1 %>
          </article>
        <% end %>
      <% end %>
    </div>
  </div>
  <div class="space-y-2 text-center">
    <%= link_to "Більше", stocks_path, class: "px-4 py-1 font-semibold border rounded dark:border-gray-900 dark:text-gray-900 cursor-pointer hover:bg-violet-400" %>
  </div>
</section>

<section class="py-6 sm:py-6 dark:text-gray-800">
  <div class="container p-6 mx-auto space-y-8">
    <div class="space-y-2 text-center">
      <h2 class="text-3xl font-bold">Новини</h2>
      <p class="font-serif text-sm dark:text-gray-400">Новини закладів</p>
    </div>
    <div class="grid grid-cols-1 gap-x-4 gap-y-8 md:grid-cols-2 lg:grid-cols-4 item-text">
      <% c = 0 %>
      <% @hits.each do |hit| %>
        <% break if c == 4 %>
        <%= link_to (hit) do %>
          <article class="flex flex-col dark:bg-gray-100">
            <% if hit.avatar.attached? %>
              <%= image_tag hit.avatar, class: "object-cover w-full h-52 dark:bg-gray-100" %></p>
            <% end %>
            <div class="flex flex-col flex-1 p-2">
              <h3 class="flex-1 py-2 text-lg font-semibold leading-snug"><%= hit.title %></h3>
              <p><%= hit.body %></p>
            </div>
            <% c += 1 %>
          </article>
        <% end %>
      <% end %>
    </div>
  </div>
  <div class="space-y-2 text-center">
    <%= link_to "Більше", hits_path, class: "px-4 py-1 font-semibold border rounded dark:border-gray-900 dark:text-gray-900 cursor-pointer hover:bg-violet-400" %>
  </div>
</section>
